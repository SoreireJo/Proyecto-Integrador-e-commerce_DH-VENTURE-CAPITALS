<!DOCTYPE html>
<html lang="es">
  <!-- Head -->
  <%- include('../partials/head.ejs', {title: 'Inicio'}) %>
  <!-- /Head -->
  <body>
    <!-- Header -->
    <%- include('../partials/header.ejs') %>
    <!-- /Header -->
    <!-- Main (Productos) -->
    <main class="main-index">

      <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img src="/images/slider/slider_001.jpg" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="/images/slider/slider_002.jpg" class="d-block w-100" alt="...">
          </div>
          <div class="carousel-item">
            <img src="/images/slider/slider_003.jpg" class="d-block w-100" alt="...">
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
        <script src="/js/slider.js"></script>
      </div>
      <section class="sec-products">
        
        <% let title= result.filter(e=> e.promoId == 2)%>
        <%if(title.length == 0){%>
           <!-- <div class="bar-ccb" id="cc-bar"></div> -->
                    <%}
         else{%>
          <div class="linea"></div>
          <h3 class="titulo-main-index"><%=title[0].promos.nombre%></h3>
          <div class="bar-ccb" id="cc-bar"></div> 
          <div class="linea"></div>
         <%}%>
        <div class="products">
          <% let product = result.filter(e=> e.promoId == 2)%>
          <% if (product.length > 0 && product.length >= 4 ) {
         
          for(let i = 0;i< (1*4);i++){%>
          <!-- Card -->
          <article class="last-tec">
            <a href="/products/detail/<%= product[i].id%>">
              <div class="linea-blanca"></div>
              <div class="main-card-img">
                <img
                  src="/images/products/<%= product[i].imagen%>"
                  alt="Imagen del producto"
                  class="product_img"
                />
              </div>
              <div class="linea-blanca"></div>
            </a>
            <div class="bar-ggr" id="gg-bar"></div>
            <div class="main-article">
              <div class="min-row">
                <button class="buttAgregar2">
                  <i
                    class="fa-solid fa-cart-plus"
                    id="crtct"
                    style="font-size: 1.2em"
                  ></i>
                </button>
                <p class="discount"><%= product[i].descuento %>% off</p>
              </div>
              <p class="price">$<%=toThousand(product[i].precio)%></p>
              <h4 class="description2"><%=product[i].nombre%></h4>
            </div>
          </article>
          <% };%> <%} else if (product.length > 0 && product.length < 4 ) {
          product.forEach(function(product){ %>
          <!-- Card -->
          <article class="last-tec">
            <a href="/products/detail/<%= product.id%>">
              <div class="linea-blanca"></div>
              <div class="main-card-img">
                <img
                  src="/images/products/<%= product.imagen%>"
                  alt="Imagen del producto"
                  class="product_img"
                />
              </div>
              <div class="linea-blanca"></div>
            </a>
            <div class="bar-ggr" id="gg-bar"></div>
            <div class="main-article">
              <div class="min-row">
                <button class="buttAgregar2">
                  <i
                    class="fa-solid fa-cart-plus"
                    id="crtct"
                    style="font-size: 1.2em"
                  ></i>
                </button>
                <p class="discount"><%= product.descuento %>% off</p>
              </div>
              <p class="price">$<%=toThousand(product.precio)%></p>
              <h4 class="description2"><%=product.nombre%></h4>
            </div>
          </article>
          <% });%> <% let u = 4 - (product.length % 4); for(let i = 0; i < u &&
          u != 4 ; i++) { %>
          <!-- GhostCard (Completando la fila de 4)-->
          <div class="bocadito-ghostcard">
            <img src="/desing/iconos/ghostcard.png" />
          </div>

          <%}%> <% } else { %>
            <div class="bocadito-ghostcard">
              <img src="/desing/iconos/ghostcard.png" />
            </div>
          <% } %>
        </div>
      </section>
      <section class="sec-products">
        <% let titles = result.filter(e=> e.promoId == 1 )%>
         <%if(titles.length == 0){%>
          <div class="linea"></div>
          <h3 class="titulo-main-index"></h3>
          <!-- <div class="bar-ccb" id="cc-bar"></div> -->
          <div class="linea"></div>
        <%}else{%>
          <div class="linea"></div>
          <h3 class="titulo-main-index"><%=titles[0].promos.nombre%></h3>
          <div class="bar-ccb" id="cc-bar"></div> 
          <div class="linea"></div>
       <%}%>
        <div class="products">
          <% let products = result.filter(e=> e.promoId == 1)%>
          <% if (products.length > 0 && products.length >= 4 ) {
          for(let i = 0;i< (1*4);i++){%>
          <!-- Card -->
          <article class="last-tec">
            <a href="/products/detail/<%= products[i].id%>">
              <div class="linea-blanca"></div>
              <div class="main-card-img">
                <img
                  src="/images/products/<%= products[i].imagen%>"
                  alt="Imagen del producto"
                  class="product_img"
                />
              </div>
              <div class="linea-blanca"></div>
            </a>
            <div class="bar-ggr" id="gg-bar"></div>
            <div class="main-article">
              <div class="min-row">
                <button class="buttAgregar2">
                  <i
                    class="fa-solid fa-cart-plus"
                    id="crtct"
                    style="font-size: 1.2em"
                  ></i>
                </button>
                <p class="discount"><%= products[i].descuento %>% off</p>
              </div>
              <p class="price">$<%=toThousand(products[i].precio)%></p>
              <h4 class="description2"><%=products[i].nombre%></h4>
            </div>
          </article>
          <% };%> <%} else if (products.length > 0 && products.length < 4 ) {
          products.forEach(function(product){ %>
          <!-- Card -->
          <article class="last-tec">
            <a href="/products/detail/<%= product.id%>">
              <div class="linea-blanca"></div>
              <div class="main-card-img">
                <img
                  src="/images/products/<%= product.imagen%>"
                  alt="Imagen del producto"
                  class="product_img"
                />
              </div>
              <div class="linea-blanca"></div>
            </a>
            <div class="bar-ggr" id="gg-bar"></div>
            <div class="main-article">
              <div class="min-row">
                <button class="buttAgregar2">
                  <i
                    class="fa-solid fa-cart-plus"
                    id="crtct"
                    style="font-size: 1.2em"
                  ></i>
                </button>
                <p class="discount"><%= product.descuento %>% off</p>
              </div>
              <p class="price">$<%=toThousand(product.precio)%></p>
              <h4 class="description2"><%=product.nombre%></h4>
            </div>
          </article>
          <% });%> <% let u = 4 - (products.length % 4); for(let i = 0; i < u &&
          u != 4 ; i++) { %>
          <!-- GhostCard (Completando la fila de 4)-->
          <div class="bocadito-ghostcard">
            <img src="/desing/iconos/ghostcard.png" />
          </div>

          <%}%>
           <% } else { %>
            <div class="bocadito-ghostcard">
              <img src="/desing/iconos/ghostcard.png" />
            </div>
          <% } %>
        </div>
      </section>
      
    </main>
    <!-- Footer -->
    <%- include('../partials/footer.ejs') %>
    <!-- /Footer -->
  </body>
</html>
